# spring boot 与SQL配合

## 经典的MVC三层架构三层架构(3-tier application) 
通常意义上的三层架构就是将整个业务应用划分为：表现层（UI）、业务逻辑层（BLL）、数据访问层（DAL）。区分层次的目的即为了“高内聚，低耦合”的思想。
1. 表现层（UI）：通俗讲就是展现给用户的界面，即用户在使用一个系统的时候他的所见所得。
2. 业务逻辑层（BLL）：针对具体问题的操作，也可以说是对数据层的操作，对数据业务逻辑处理。
3. 数据访问层（DAL）：该层所做事务直接操作数据库，针对数据的增添、删除、修改、更新、查找等。

## 如何实现一个MVC架构？
1. 利用java的包机制将不同的部分分包。
   ![Alt text](image.png)
   上图中的项目就鲜明地分为了四个部分：controller，dao，entity，service，这四个部分。它们分别对应：表现层，数据访问层，类实体，业务逻辑层。
2. 在每个包的内部实现他们的功能。
   使用严格的分离策略，除实体类之外，其他的类只使用这几个包中暴露出的方法而不直接接触被包的内部屏蔽掉的操作。
3. 完成啦！

## 每一层中的具体实现
### DAL
主要宗旨为与数据库进行交互。不直接参与数据的处理。一定要做好分层，想清楚究竟那个操作到放到dal中那个又不应该放入其中。
通用DAL层：

DAL又可以分为两类：
- 通用DAL层：
	提供一个通用的DAL层的基础框架，其中包括所有实体类的基类，所有DAL类的基类，以及用来在实体类和数据表以及实体类字段和数据表字段之间Mapping的Attributes。此层作为核心框架只实现一次，此层通常不捕获任何异常
	原则：提供通用的增删改查基础架构，提供实体类基础架构，提供ORMapping基础架构，面向所有表，此层以通用为目标，面向数据库。

- 专用DAL层：
	基于通用DAL层的基础架构，为每个具体表提供一个实体类和一个DAL类，此层比通用DAL层的通用性稍差，这主要是为了给每个表提供一些专用的操作。此层以单表为中心，为针对单表的各种可能的访问提供专用方法，可以作为单表数据的入口。专用DAL层不捕获任何异常
	专用DAL层的实体类和DAL类中的成员定义要向数据表对齐，函数定义中的参数要和存储过程的参数完全匹配。

{% hint style="info" %}
　　原则：基于表，作为表入口
{% endhint %}

### BLL
以业务概念为核心组织业务处理过程，在业务处理过程中织入对专用DAL层的调用，BLL层通常通过捕获异常或执行业务逻辑检查（检查业务数据，如没有取到数据，或数据不符合当前业务等）来发现业务处理中的异常情况，并通过定义新的异常来向使用BLL的UI层提供更为面向业务的异常信息。

BLL层的实体类和BLL类的方法定义要向业务对象对齐，函数定义中的参数可以粗一些，直接传业务对象过来，尽管有时候只使用了其中的个别字段（如用于update status的方法一般就只使用业务对象中的ID和status）。

{% hint style="info" %}
　　原则：基于业务逻辑来组织对专用DAL层的调用。
{% endhint %}

### UI
这一层主要负责应对前端发送过来的请求。只需要按照前端的需求返回即可，问题不大。

{% hint style="info" %}
分层是否是绝对的？
答案显然是否定的，一个典型的例子是现代的大型项目中出现了统一的normal层与common层这两侧用来处理一些公用的实体或其他类。
分层是一种实用的哲学，这是抽象这一技巧的体现。分或不分，这是一个问题。
{% endhint %}

## 与SQL的配合
